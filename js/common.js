// Translations object
const translations = {
  no: {
    devBanner: "ðŸš§ Denne nettsiden er under utvikling",
    skipToContent: "Hopp til innhold",
    projects: "Prosjekter",
    experience: "Erfaring",
    skills: "Ferdigheter",
    about: "Om meg",
    contact: "Kontakt",
    degreeProgram: "Automatisering og intelligente systemer @ NTNU Â· Trondheim",
    greeting: "Hei, jeg er",
    heroSubtitle:
      "Bachelorstudent i Automatisering og intelligente systemer pÃ¥ NTNU, spesialiserer meg innen robotikk, autonomi og reguleringsteknikk. Erfaren med simulering og utvikling av styringssystemer, supplert med ledererfaring som skiftleder i et dynamisk arbeidsmiljÃ¸.",
    seeProjects: "Se prosjekter",
    getInTouch: "Ta kontakt",
    controlSystems: "Styringssystemer",
    modeling: "Modellering",
    physics: "Fysikk",
    openToInternships: "Ã…pen for praksis Â· 2026",
    heroDescription:
      "Nysgjerrig automatiseringsstudent med lidenskap for autonomi, navigasjon og styring. SÃ¸ker sommerpraksis hvor jeg kan bidra til utvikling av robuste, intelligente systemer og lÃ¦re av virkelige ingeniÃ¸rutfordringer underveis.",
    downloadCV: "Last ned CV",
    emailMe: "Send e-post",
    featuredProjects: "Utvalgte prosjekter",
    projectsSubtitle: "Noen ting jeg har jobbet med nylig.",
    Lorem: "Lorem",
    "Lorem, ipsum.": "Lorem, ipsum.",
    "Lorem ipsum dolor sit amet.": "Lorem ipsum dolor sit amet.",
    repo: "Repo",
    financialManager: "Ã˜konomiansvarlig",
    voluntaryWork: "Frivillig arbeid",
    present: "NÃ¥vÃ¦rende",
    financialManagerDesc:
      "Hadde ansvaret for budsjettering, regnskap og finansiell planlegging for studentorganisasjonen som representerer elektrostudenter pÃ¥ NTNU. Introduserte strukturerte finansielle prosedyrer som forbedret transparens, nÃ¸yaktighet og kontroll av organisasjonens finansielle drift.",
    shiftLeader: "Skiftleder",
    partTime: "Deltid",
    shiftLeaderDesc:
      "Ansvarlig for opplÃ¦ring, drift og kundeservice i et tempofylt miljÃ¸. Bidro til forbedrede prosedyrer som Ã¸kte effektiviteten i billett- og kiosksalg samtidig som den totale kundeopplevelsen ble forbedret.",
    teachingAssistant: "Undervisningsassistent",
    teachingAssistantDesc:
      "StÃ¸tter undervisning og studentveiledning pÃ¥ NTNU. Gir akademisk assistanse, hjelper med Ã¸vinger og legger til rette for dypere forstÃ¥else av fagstoffet.",
    communicationsOperator: "SambandsoperatÃ¸r - Luftvern",
    fullTime: "Fulltid",
    norwegianArmedForces: "Forsvaret",
    communicationsOperatorDesc:
      "Operativ erfaring med sambandssystemer i Luftvernbataljonen. Tjenestegjorde som del av NATO Response Force, som krevde presisjon, lagarbeid og beredskap. Bidro til sikker og effektiv kommunikasjon under krevende forhold.",
    bartender: "Bartender",
    bartenderDesc:
      "Jobbet under UKA-studentfestivalen pÃ¥ Samfundet i Trondheim, en av Norges stÃ¸rste studentfestivaler. Opererte i et hÃ¸ytempobart miljÃ¸ og utviklet sterke ferdigheter innen service, lagarbeid og stresshÃ¥ndtering under krevende forhold.",
    managerAndTreasurer: "Leder og kasserer",
    managerAndTreasurerDesc:
      "Ledet en Ã¥rlig skolerevy pÃ¥ Thora Storm videregÃ¥ende skole med over 150 deltakere. Ansvarlig for planlegging, Ã¸vinger og gjennomfÃ¸ring av produksjonen, samt budsjettering og Ã¸konomistyring, inkludert billettsalg og sponsorater.",
    programming: "Programmering",
    unitTesting: "Enhetstesting",
    controlsAndSignals: "Styring og signaler",
    rootLocus: "Rotlokus",
    hardware: "Maskinvare",
    aboutText1:
      "Jeg er student i Automatisering og intelligente systemer pÃ¥ NTNU, basert i Trondheim, Norge. Mine interesser ligger i skjÃ¦ringspunktet mellom reguleringsteknikk og innebygd programvare â€” Ã¥ bruke streng matematikk for Ã¥ fÃ¥ maskinvare til Ã¥ oppfÃ¸re seg.",
    aboutText2:
      "NÃ¥r jeg ikke studerer, finner du meg ved Ã¥ bygge smÃ¥ roboter, lese databladene eller gÃ¥ tur rundt Bymarka.",
    highlights: "HÃ¸ydepunkter",
    highlight1:
      "Hands-on med sensorer (IMU, ToF, encodere) og sanntidsbegrensninger.",
    highlight2: "Komfortabel med Ã¥ gÃ¥ fra simulering til maskinvareoppstart.",
    highlight3: "Nysgjerrig, pÃ¥litelig og sikkerhetsorientert.",
    letsStartSomething: "La oss starte noe flott",
    contactDesc:
      "Send meg en e-post direkte eller bruk skjemaet. Jeg er Ã¥pen for praksis, prosjekter og samarbeid.",
    name: "Navn",
    email: "E-post",
    message: "Melding",
    formNote:
      "Dette skjemaet Ã¥pner e-postappen din med en forhÃ¥ndsutfylt melding.",
    send: "Send",
  },
  en: {
    devBanner: "ðŸš§ This website is under development",
    skipToContent: "Skip to content",
    projects: "Projects",
    experience: "Experience",
    skills: "Skills",
    about: "About",
    contact: "Contact",
    degreeProgram: "Automation & Intelligent Systems @ NTNU Â· Trondheim",
    greeting: "Hi, I'm",
    heroSubtitle:
      "Bachelor's student in Automation and Intelligent Systems at NTNU, specializing in robotics, autonomy, and control engineering. Skilled in simulation and control system development, complemented by leadership experience as a shift supervisor in a dynamic work environment.",
    seeProjects: "See projects",
    getInTouch: "Get in touch",
    controlSystems: "Control systems",
    modeling: "Modeling",
    physics: "Physics",
    openToInternships: "Open to Internships Â· 2026",
    heroDescription:
      "Curious automation student passionate about autonomy, navigation, and control. Looking for a summer internship where I can contribute to developing resilient, intelligent systems, and learn from real engineering challenges along the way.",
    downloadCV: "Download CV",
    emailMe: "Email me",
    featuredProjects: "Featured Projects",
    projectsSubtitle: "A few things I've done recently.",
    Lorem: "Lorem",
    "Lorem, ipsum.": "Lorem, ipsum.",
    "Lorem ipsum dolor sit amet.": "Lorem ipsum dolor sit amet.",
    repo: "Repo",
    financialManager: "Financial Manager",
    voluntaryWork: "Voluntary work",
    present: "Present",
    financialManagerDesc:
      "Oversaw the budgeting, accounting, and financial planning processes for the student organization representing electrical engineering students at NTNU. Introduced structured financial management procedures that enhanced transparency, accuracy, and control of the organization's financial operations.",
    shiftLeader: "Shift Leader",
    partTime: "Part-time",
    shiftLeaderDesc:
      "Responsible for training, operations, and customer service in a fast-paced environment. Contributed to improved procedures that increased efficiency in ticketing and concession operations while enhancing the overall customer experience.",
    teachingAssistant: "Teaching Assistant",
    teachingAssistantDesc:
      "Supports teaching and student guidance at NTNU. Provides academic assistance, helps with exercises, and facilitates deeper understanding of the course material.",
    communicationsOperator: "Communications Operator - Air Defence",
    fullTime: "Full-time",
    norwegianArmedForces: "Norwegian Armed Forces",
    communicationsOperatorDesc:
      "Operational experience with communication systems in the Air Defence Battalion. Served as part of the NATO Response Force, requiring precision, teamwork, and readiness. Contributed to secure and efficient communication in demanding conditions.",
    bartender: "Bartender",
    bartenderDesc:
      "Worked during the UKA student festival at Samfundet in Trondheim, one of Norway's largest student festivals. Operated in a high-paced bar environment, developing strong skills in service, teamwork, and stress management under demanding conditions.",
    managerAndTreasurer: "Manager and Treasurer",
    managerAndTreasurerDesc:
      "Led an annual school revue at Thora Storm Upper Secondary School with over 150 participants. Responsible for planning, rehearsals, and execution of the production, as well as budgeting and financial management, including ticket sales and sponsorships.",
    programming: "Programming",
    unitTesting: "Unit Testing",
    controlsAndSignals: "Controls & Signals",
    rootLocus: "Root Locus",
    hardware: "Hardware",
    aboutText1:
      "I'm a student in Automation & Intelligent Systems at NTNU, based in Trondheim, Norway. My interests sit at the intersection of control engineering and embedded software â€” using rigorous math to make hardware behave.",
    aboutText2:
      "When I'm not studying, you'll find me building small robots, reading datasheets, or hiking around Bymarka.",
    highlights: "Highlights",
    highlight1:
      "Hands-on with sensors (IMU, ToF, encoders) and real-time constraints.",
    highlight2: "Comfortable moving from simulation to hardware bring-up.",
    highlight3: "Curious, reliable, and safety-minded.",
    letsStartSomething: "Let's start something great",
    contactDesc:
      "Email me directly or use the form. I'm open to internships, projects, and collaborations.",
    name: "Name",
    email: "Email",
    message: "Message",
    formNote: "This form opens your email app with a prefilled message.",
    send: "Send",
  },
};

// Language functionality
let currentLang = localStorage.getItem("language") || "no";

function updateLanguage(lang) {
  currentLang = lang;
  localStorage.setItem("language", lang);
  document.documentElement.lang = lang;

  // Update title and meta description
  if (lang === "no") {
    document.title = "Anders Garberg â€” Automatisering og intelligente systemer";
    document.querySelector('meta[name="description"]').content =
      "Portfolio og kontaktside for student i Automatisering og intelligente systemer (NTNU). Prosjekter, erfaring og mÃ¥ter Ã¥ ta kontakt pÃ¥.";
  } else {
    document.title = "Anders Garberg â€” Automation & Intelligent Systems";
    document.querySelector('meta[name="description"]').content =
      "Portfolio and contact page for a student in Automation & Intelligent Systems (NTNU). Projects, experience, and ways to get in touch.";
  }

  // Update all translatable elements
  const elements = document.querySelectorAll("[data-translate]");
  elements.forEach((element) => {
    const key = element.getAttribute("data-translate");
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });

  // Update placeholders
  const nameInput = document.getElementById("name");
  const emailInput = document.getElementById("email");
  const messageTextarea = document.getElementById("message");

  if (nameInput && emailInput && messageTextarea) {
    if (lang === "no") {
      nameInput.placeholder = "Ditt navn";
      emailInput.placeholder = "deg@domene.no";
      messageTextarea.placeholder = "Fortell meg om deg selv";
    } else {
      nameInput.placeholder = "Your name";
      emailInput.placeholder = "you@domain.com";
      messageTextarea.placeholder = "Tell me about yourself";
    }
  }
}

// Theme functionality
const root = document.documentElement;
const userPref = localStorage.getItem("theme");
const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

function applyTheme(mode) {
  if (mode === "light") {
    root.classList.add("light");
  } else {
    root.classList.remove("light");
  }
  localStorage.setItem("theme", mode);
}

// Update scroll padding based on actual header heights
function updateScrollPadding() {
  const nav = document.querySelector('nav');
  const devBanner = document.querySelector('.dev-banner');
  const navHeight = nav ? nav.offsetHeight : 64;
  const bannerHeight = devBanner ? devBanner.offsetHeight : 0;
  const totalOffset = navHeight + bannerHeight;
  
  document.documentElement.style.scrollPaddingTop = `${totalOffset}px`;
}

// Initialize theme and language
document.addEventListener('DOMContentLoaded', function() {
  applyTheme(userPref || (systemDark ? "dark" : "light"));
  updateLanguage(currentLang);
  updateScrollPadding();
  
  // Update on resize in case banner height changes
  window.addEventListener('resize', updateScrollPadding);
  
  // Set year
  const yearElement = document.getElementById("year");
  if (yearElement) {
    yearElement.textContent = new Date().getFullYear();
  }
});
